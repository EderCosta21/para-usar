{"version":3,"file":"ion-bottom-drawer.umd.js.map","sources":["ng://ion-bottom-drawer/modules/ion-bottom-drawer/ion-bottom-drawer.ts","ng://ion-bottom-drawer/modules/ion-bottom-drawer/ion-bottom-drawer.module.ts"],"sourcesContent":["import { Component, Input, ElementRef, Renderer2, Output, EventEmitter, AfterViewInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { Platform, DomController } from 'ionic-angular';\n\nimport { DrawerState } from './drawer-state';\n\n@Component({\n  selector: 'ion-bottom-drawer',\n  template: `<ion-content class=\"ion-bottom-drawer-scrollable-content\" no-bounce>\n  <ng-content></ng-content>\n</ion-content>\n`,\n  styles: [`:host{width:100%;height:100%;position:absolute;left:0;z-index:11!important;background-color:#fff;-webkit-transform:translateY(100vh);transform:translateY(100vh)}`]\n})\nexport class IonBottomDrawerComponent implements AfterViewInit, OnChanges {\n  @Input() dockedHeight: number = 50;\n\n  @Input() shouldBounce: boolean = true;\n\n  @Input() disableDrag: boolean = false;\n\n  @Input() distanceTop: number = 0;\n\n  @Input() transition: string = '0.25s ease-in-out';\n\n  @Input() state: DrawerState = DrawerState.Bottom;\n\n  @Input() minimumHeight: number = 0;\n\n  @Output() stateChange: EventEmitter<DrawerState> = new EventEmitter<DrawerState>();\n\n  private _startPositionTop: number;\n  private readonly _BOUNCE_DELTA = 30;\n\n  constructor(\n    private _element: ElementRef,\n    private _renderer: Renderer2,\n    private _domCtrl: DomController,\n    private _platform: Platform\n  ) { }\n\n  ngAfterViewInit() {\n    this._renderer.setStyle(this._element.nativeElement.querySelector('.ion-bottom-drawer-scrollable-content .scroll-content'), 'touch-action', 'none');\n    this._setDrawerState(this.state);\n\n    const hammer = new Hammer(this._element.nativeElement);\n    hammer.get('pan').set({ enable: true, direction: Hammer.DIRECTION_VERTICAL });\n    hammer.on('pan panstart panend', (ev: any) => {\n      if (this.disableDrag) return;\n\n      switch (ev.type) {\n        case 'panstart':\n          this._handlePanStart();\n          break;\n        case 'panend':\n          this._handlePanEnd(ev);\n          break;\n        default:\n          this._handlePan(ev);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (!changes.state) return;\n    this._setDrawerState(changes.state.currentValue);\n  }\n\n  private _setDrawerState(state: DrawerState) {\n    this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n    switch (state) {\n      case DrawerState.Bottom:\n        this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n        break;\n      case DrawerState.Docked:\n        this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n        break;\n      default:\n        this._setTranslateY(this.distanceTop + 'px');\n    }\n  }\n\n  private _handlePanStart() {\n    this._startPositionTop = this._element.nativeElement.getBoundingClientRect().top;\n  }\n\n  private _handlePanEnd(ev) {\n    if (this.shouldBounce && ev.isFinal) {\n      this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n\n      switch (this.state) {\n        case DrawerState.Docked:\n          this._handleDockedPanEnd(ev);\n          break;\n        case DrawerState.Top:\n          this._handleTopPanEnd(ev);\n          break;\n        default:\n          this._handleBottomPanEnd(ev);\n      }\n    }\n    this.stateChange.emit(this.state);\n  }\n\n  private _handleTopPanEnd(ev) {\n    if (ev.deltaY > this._BOUNCE_DELTA) {\n      this.state = DrawerState.Docked;\n    } else {\n      this._setTranslateY(this.distanceTop + 'px');\n    }\n  }\n\n  private _handleDockedPanEnd(ev) {\n    const absDeltaY = Math.abs(ev.deltaY)\n    if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY < 0) {\n      this.state = DrawerState.Top;\n    } else if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY > 0) {\n      this.state = DrawerState.Bottom\n    } else {\n      this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n    }\n  }\n\n  private _handleBottomPanEnd(ev) {\n    if (-ev.deltaY > this._BOUNCE_DELTA) {\n      this.state = DrawerState.Docked;\n    } else {\n      this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n    }\n  }\n\n  private _handlePan(ev) {\n    const pointerY = ev.center.y;\n    this._renderer.setStyle(this._element.nativeElement, 'transition', 'none');\n    if (pointerY > 0 && pointerY < this._platform.height()) {\n      if (ev.additionalEvent === 'panup' || ev.additionalEvent === 'pandown') {\n        const newTop = this._startPositionTop + ev.deltaY;\n        if (newTop >= this.distanceTop) this._setTranslateY(newTop + 'px');\n        else if (newTop < this.distanceTop) this._setTranslateY(this.distanceTop + 'px');\n        if (newTop > this._platform.height() - this.minimumHeight) this._setTranslateY((this._platform.height() - this.minimumHeight) + 'px');\n      }\n    }\n  }\n\n  private _setTranslateY(value) {\n    this._domCtrl.write(() => {\n      this._renderer.setStyle(this._element.nativeElement, 'transform', 'translateY(' + value + ')');\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { IonicModule } from 'ionic-angular';\nimport { IonBottomDrawerComponent } from './ion-bottom-drawer';\n\n@NgModule({\n  declarations: [IonBottomDrawerComponent],\n  imports: [IonicModule],\n  exports: [IonBottomDrawerComponent]\n})\nexport class IonBottomDrawerModule { }\n"],"names":["EventEmitter","Component","ElementRef","Renderer2","DomController","Platform","Input","Output","NgModule","IonicModule"],"mappings":"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"}
